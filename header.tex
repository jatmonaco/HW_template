% --- Formatting document --- %
% \usepackage{collectbox}               % better boxes
% \usepackage{textcomp}                 % allows additional fonts for compatability 
\usepackage[letterpaper,margin=0.5in, top=2cm, bottom=2cm]{geometry}   % Controls margins 
\setparsizes{0pt}{8pt}{0pt plus 1fil}   % sets paragraph spacing 
\usepackage{enumitem}                   % better enumeration environments
\usepackage[dvipsnames]{xcolor}         % better colors 
\usepackage{caption}                    % custom captions
\usepackage{subcaption}                 % subcaptions and subfigures 
\usepackage{graphicx}                   % better float managment
\usepackage{wrapfig}                    % wrapfigure environment 
\usepackage{tcolorbox}                  % better colorboxes
\usepackage[english]{babel}             % language support 
\usepackage[autostyle, english = american]{csquotes}  % quote control 
% \MakeOuterQuote{"}
\usepackage{pdfpages}                   % include multi-page pdfs 
\usepackage{titling}                    % better title creation 
\usepackage{bibunits}                   % multiple bibs in the same doc 
\usepackage{authblk}                    % Author affiliations. Configs below. 
\setlength{\affilsep}{0em}
\renewcommand\Affilfont{\small}
\usepackage[headsepline]{scrlayer-scrpage}  % header 
\usepackage{lipsum}                     % test text

% --- Code display --- % 
% \usepackage{fancyvrb}                 % better verbatem. Superceded by minted? 
% \usepackage{listings}                 % inline code. Superceded by minted?
% \usepackage{algorithmic}              % float wrapper for algorithms
\usepackage[outputdir=out_files]{minted} % better code display  
\definecolor{bg}{rgb}{.9, .9, .9}       
\usemintedstyle{emacs,bgcolor=bg, breaklines=true, linenos=true}


% --- Figure creation --- %
% \usepackage{asymptote}                  % asymptote 
% \usepackage{asypictureB}                % asy helper?
\usepackage{tikz}                         % drawing graphics 


% --- Math --- %
\usepackage{siunitx}                    % units in math mode
\usepackage{cancel}                     % cancel out terms in math mode 
\usepackage{amsmath, amsfonts, mathtools, amsthm, amssymb}
\usepackage{mathtools}
\usepackage{witharrows}                 % allows arrows from one equation to another for explaination
% Exponentials
\newcommand{\e}[0]{\mathrm{e}}                      % math e 
\newcommand{\expnum}[2]{{#1}\mathrm{e}{#2}}         % exponential number
% Vector notation
\newcommand{\dbar}[1]{\overline{\overline{#1}}}     % double overbar
\newcommand{\var}{\mathrm{Var}}                     % variance
\newcommand{\Dbar}[1]{\dot{\bar{#1}}}               % double bar
\newcommand{\Ddbar}[1]{\ddot{\bar{#1}}}             % dot over bar
\newcommand{\Dtilde}[1]{\dot{\tilde{#1}}}           % dot over tilde


% ---- Citation and linking ---- % 
\usepackage{hyperref}
\usepackage{cite}
\usepackage{cleveref}

% --- Title configuration --- % 
% stolen from: https://tex.stackexchange.com/questions/328094/easy-way-to-change-title-author-styles
\pretitle{% add some rules
  \vspace{-2.5cm}  
  \begin{center}
    \Huge\bfseries
}%, make the fonts bigger, make the title (only) bold
\posttitle{%
  \end{center}%
%   \noindent\vrule height 2.5pt width \textwidth
  \vskip .75em plus .25em minus .25em% increase the vertical spacing a bit, make this particular glue stretchier
}
\preauthor{%
  \begin{center}
    \vspace{-0.25cm}  
    \large % \lineskip 0.75em%
    % \vrule height 0.4pt width .25\textwidth\par
    \begin{tabular}[t]{@{}l@{}}%
}
\postauthor{%
    \end{tabular}
    \vskip -.5em
    \par
    % \vrule height 0.4pt width .25\textwidth\par
  \end{center}%
}
\predate{%
  \begin{center}
    \vspace{-.25cm}  
    \large
}
\postdate{%
  \end{center}%
  % \vspace{-1cm}
}

%  --- Theorem boxes --- %
\usepackage{thmtools} 
\usepackage[framemethod=TikZ]{mdframed}
\mdfsetup{skipabove=1em,skipbelow=0em}

% Definition box
\theoremstyle{definition}
\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{ForestGreen!70!black}, bodyfont=\normalfont,
    notebraces={}{},
    headpunct={},
    mdframed={
            linewidth=2pt,
            rightline=false, topline=false, bottomline=false,
            linecolor=ForestGreen, backgroundcolor=ForestGreen!8,
            nobreak=false
        }
]{thmgreen2box}
\declaretheorem[style=thmgreen2box, name=Definition, numbered=no]{definition}

% Example box
\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{NavyBlue!70!black}, bodyfont=\normalfont,
    notebraces={}{},
    headpunct={},
    mdframed={
            linewidth=2pt,
            rightline=false, topline=false, bottomline=false,
            linecolor=NavyBlue, backgroundcolor=NavyBlue!5,
            nobreak=false
        }
]{thmbluebox}
\declaretheorem[style=thmbluebox, numbered=no, name=Example]{eg}

% Theorem box
\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{RawSienna!70!black}, bodyfont=\normalfont,
    notebraces={}{},
    headpunct={},
    mdframed={
            linewidth=2pt,
            rightline=false, topline=false, bottomline=false,
            linecolor=RawSienna, backgroundcolor=RawSienna!8,
            nobreak=false
        }
]{thmred2box}
\declaretheorem[style=thmred2box, name=Theorem, numbered=no]{theorem}

% Remark Box 
\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{TealBlue!70!black}, bodyfont=\normalfont,
    mdframed={
            linewidth=2pt,
            rightline=false, topline=false, bottomline=false,
            linecolor=TealBlue,
            nobreak=false
        }
]{thmblueline}
\declaretheorem[style=thmblueline, numbered=no, name=Remark]{remark}


